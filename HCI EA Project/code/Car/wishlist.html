<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="wishlist.css">
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <link rel="stylesheet" href="../main.css">
    <title>Document</title>
</head>
<body>
    <header>
        <nav class="navbar">
            <h2 class="logo"><a href="">Legend Motor Limited</a></h2>
            <span>
                    <div class="search-bar">
                        <input type="text" id="search-input" placeholder="Search cars...">
                        <button id="search-btn">Search</button>
                    </div>
            </span>
            <ul class="all-links">
                <li><a href="" id="product">Product</a></li>
                <li><a href="" id="order">My Order</a></li>
                <li><a href="#" id="wishlistpage">Wish List</a></li>
                <li><a href="#" id="user">User</a></li>
                <li><a href="" id="logout">Logout</a></li>
            </ul>
        </nav>
    </header>

    <div class="content">  
            <div class="wishlist-header">
              <h2>My Wishlist</h2>
            </div>
            <table>
              <thead>
                <tr>
                  <th></th>
                  <th>Product </th>
                  <th>Name</th>
                  <th>brands</th>
                  <th>Price</th>
                  <th>Stock Status</th>
                  <th>Actions</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td><span class="remove-btn" id="remove-btn" data-name="Product Split">×</span></td>
                  <td><img src="carimg/ix2.png" alt="Product Image" ></td>
                  <td>Product Split</td>
                  <td>Porsche</td>
                  <td><div class="unit-price"><span>$100,000,000hkd</span></div></td>
                  <td>In Stock</td>
                  <td><button class="add-to-cart-btn" id="buy-now-btn">Buy it now </button></td>
                </tr>
                <tr>
                    <td><span class="remove-btn" data-name="Revuelto">×</span></td>
                    <td><img src="carimg/Revuelto.avif" alt="Product Image"></td>
                    <td>Revuelto</td>
                    <td>McLaren</td>
                    <td><div class="unit-price"><span>$100,000,000hkd</span></div></td>
                    <td>In Stock</td>
                    <td><button class="add-to-cart-btn" id="buy-now-btn">Buy it now </button></td>
                  </tr>                
                  <tr>
                    <td><span class="remove-btn" data-name="AE86">×</span></td>
                    <td><img src="carimg/AE86.jpeg" alt="Product Image"></td>
                    <td>AE86</td>
                    <td>Toyota</td>
                    <td><div class="unit-price"><span>$100,000,000hkd</span></div></td>
                    <td>In Stock</td>
                    <td><button class="add-to-cart-btn" id="buy-now-btn">Buy it now </button></td>
                  </tr>
              </tbody>
            </table>
    </div>

    <div class="modal-overlay" id="modalOverlay">
        <div class="modal">
            <span class="close-modal" id="closeModalPersonal">&times;</span>
            <div class="modal-header">Personal Information</div>
            <form>
                <div class="form-group">
                    <label for="fullName">Full Name</label>
                    <input type="text" id="fullName" name="fullName">
                </div>
                <div class="form-group">
                    <label for="firstName">First Name</label>
                    <input type="text" id="firstName" name="firstName">
                </div>
                <div class="form-group">
                    <label for="lastName">Last Name</label>
                    <input type="text" id="lastName" name="lastName">
                </div>
                <div class="form-group">
                    <label for="email">Email</label>
                    <input type="email" id="email" name="email">
                </div>
                <div class="form-group">
                    <label for="phoneNumber">Phone Number</label>
                    <input type="tel" id="phoneNumber" name="phoneNumber">
                </div>
            </form>

            <br>
            <div class="modal-header">Delivery Information</div>
            <form>
                <div class="form-group">
                    <label for="address">Address</label>
                    <input type="text" id="address" name="address">
                </div>
                <div class="form-group">
                    <label for="city">City</label>
                    <input type="text" id="city" name="city">
                </div>
                <div class="form-group">
                    <label for="area">Area</label>
                    <input type="text" id="area" name="area">
                </div>
                <div class="form-group">
                    <label for="district">District</label>
                    <input type="text" id="district" name="district">
                </div>
                <div class="form-group">
                    <label>
                        <input type="checkbox" id="sameAsBilling" checked> Shipping address same as billing
                    </label>
                </div>
                <div class="form-actions">
                    <button type="button" id="continueToPayment">Continue to Payment</button>
                </div>
            </form>
        </div>
    </div>

    <div class="modal-overlay" id="paymentModalOverlay">
        <div class="modal">
            <span class="close-modal" id="closeModalPayment">&times;</span>
            <div class="modal-header">Payment Information</div>
            <form>
                <div class="form-group">
                    <label for="cardNumber">Card Number</label>
                    <input type="text" id="cardNumber" name="cardNumber" placeholder="Enter your card number" required>
                </div>
                <div class="form-group">
                    <label for="cardName">Cardholder Name</label>
                    <input type="text" id="cardName" name="cardName" placeholder="Enter the cardholder's name" required>
                </div>
                <div class="form-group">
                    <label for="expiryDate">Expiry Date</label>
                    <input type="text" id="expiryDate" name="expiryDate" placeholder="MM/YY" required>
                </div>
                <div class="form-group">
                    <label for="cvv">CVV</label>
                    <input type="text" id="cvv" name="cvv" placeholder="CVV" required>
                </div>
                <div class="form-actions">
                    <button type="button" id="paymentbtn">Pay Now</button>
                </div>
            </form>
        </div>
    </div>
    <div class="message" id="cartMessage"></div>
      
      <footer id="contact">
        <p>Email: cw-cs@vtc.edu.hk</p>
        <p>Phone: (852) 2595 8333</p>
      </footer>
      
      <script>

        $("#order").click(function(event) {
            event.preventDefault();
            window.location.href = "order.html"; 
        });

        $("#product").click(function(event) {
            event.preventDefault();
            window.location.href = "car.html"; 
        });

        $("#logout").click(function(event) {
            event.preventDefault();
            window.location.href = "../login/LoginPage.html"; 
        });

        $("#user").click(function(event) {
            event.preventDefault();
            window.location.href = "userpage.html"; 
        });

        $('#search-btn').click(function() {
        var searchTerm = $('#search-input').val().toLowerCase(); 
        $('table tbody tr').each(function() {
            var productName = $(this).find('td:eq(2)').text().toLowerCase();
            
            if (productName.indexOf(searchTerm) !== -1) {
                $(this).show();
            } else {

                $(this).hide();
            }
        });
    });

    $('#search-input').keypress(function(e) {
        if (e.which === 13) {
            $('#search-btn').click();
        }
    });

$(document).ready(function() {
  $('.add-to-cart-btn').click(function() {
    $('#modalOverlay').fadeIn();
  });

  $('#closeModalPersonal').click(function() {
    $('#modalOverlay').fadeOut();
  });

  $('#modalOverlay').click(function(e) {
    if (e.target === this) {
      $(this).fadeOut();
    }
  });

  
  $('#continueToPayment').click(function() {
    $('#paymentModalOverlay').fadeIn();
    $('#modalOverlay').fadeOut(); 
  });

  $('#closeModalPayment').click(function() {
    $('#paymentModalOverlay').fadeOut();
  });

  $('#paymentModalOverlay').click(function(e) {
    if (e.target === this) {
      $(this).fadeOut();
    }
  });
});

$('.remove-btn').click(function() {
                var productName = $(this).closest('tr').find('td:eq(2)').text(); 
                
                $(this).closest('tr').remove();
                $('#cartMessage').text(`${productName} has been removed from the Wish List`).css('background-color', 'red').show();

                setTimeout(() => {
                    $('#cartMessage').fadeOut();
                }, 1500);
            });

            $('#paymentbtn').click(function(e) {
                $('#cartMessage').text(`Order Created Successfullyt`).css('background-color', 'green').show();
                $('#paymentModalOverlay').fadeOut();
            });
      </script>
      
</html>